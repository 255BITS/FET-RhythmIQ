<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}RhythmIQ{% endblock %}</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js" defer></script>
    <script src="https://unpkg.com/htmx.org@1.9.2"></script>
    <script src="https://unpkg.com/idiomorph@0.3.0/dist/idiomorph-ext.min.js"></script>
    <script defer src="https://analytics.255labs.xyz/script.js" data-website-id="d7e942f5-8062-4621-9870-4e88e44f196f"></script>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/custom.css') }}?v=2">
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&family=Inter:wght@400;600&display=swap" rel="stylesheet">
</head>
<body class="bg-[#1a1b26] text-gray-100 font-sans">
    <div class="container mx-auto p-6">
      {% with messages = get_flashed_messages() %}
        {% if messages %}
          <div class="flash-messages mb-4">
            {% for message in messages %}
              <div class="alert alert-info">{{ message }}</div>
            {% endfor %}
          </div>
        {% endif %}
      {% endwith %}
      {% block content %}{% endblock %}
    </div>
  <!-- Login/Signup Modal Container -->
  <div id="loginModal" class="fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 hidden">
    <div class="bg-gray-900 p-6 rounded-lg relative">
      <button onclick="closeLoginModal()" class="absolute top-2 right-2 text-gray-400">&times;</button>
      <div id="loginModalContent"></div>
    </div>
  </div>
  <script>
    function openLoginModal() {
      const modal = document.getElementById('loginModal');
      modal.classList.remove('hidden');
      fetch('{{ url_for("auth.login") }}')
        .then(response => response.text())
        .then(html => {
          document.getElementById('loginModalContent').innerHTML = html;
        });
    }
    function openSignupModal() {
      const modal = document.getElementById('loginModal');
      modal.classList.remove('hidden');
      fetch('{{ url_for("auth.signup") }}')
        .then(response => response.text())
        .then(html => {
          document.getElementById('loginModalContent').innerHTML = html;
        });
    }
    function closeLoginModal() {
      document.getElementById('loginModal').classList.add('hidden');
    }
  </script>
  <script src="{{ url_for('static', filename='js/app.js') }}"></script>
</body>
</html>